<!DOCTYPE html>
<html lang="de">
<head>
  <title>sfForms - Complex Test With Styles</title>
  <link rel="stylesheet" type="text/css"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
</head>
<body>
<div id="content" class="container-fluid">
  <div class="page-header"><h1>Befehl bearbeiten</h1></div>
  <form name="InstructionDataForm" method="post" action=""
        id="instruction_modify_form" class="form-horizontal"
        role="form">
    <div class="form-group">
      <label class="col-sm-2 control-label required"
             for="InstructionDataForm_instructionCommand">Befehl</label>
      <div class="col-sm-3 col-md-2 col-sm-offset-1 col-md-offset-0">
        <input type="text" id="InstructionDataForm_instructionCommand"
               name="InstructionDataForm[instructionCommand]"
               required="required" class="form-control"/>

      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-3 col-md-2 control-label required"
             for="InstructionDataForm_instructionDescription">Befehlsbezeichnung</label>
      <div class="col-sm-5 col-md-4">
        <input type="text" id="InstructionDataForm_instructionDescription"
               name="InstructionDataForm[instructionDescription]"
               required="required" class="form-control"/>

      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-3 col-md-2 control-label"
             for="InstructionDataForm_parameterDelimiter">Parametertrenner</label>
      <div class="col-sm-2 col-md-1">
        <input type="text" id="InstructionDataForm_parameterDelimiter"
               name="InstructionDataForm[parameterDelimiter]"
               class="form-control"/>

      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-2 control-label"
             for="InstructionDataForm_instructionGroup">Befehlsgruppe</label>
      <div class="col-sm-3 col-md-2 col-sm-offset-1 col-md-offset-0">
        <input type="text" id="InstructionDataForm_instructionGroup"
               name="InstructionDataForm[instructionGroup]"
               class="form-control"/>

      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-2 control-label" for="InstructionDataForm_fieldSize">Feldgr&ouml;&szlig;e</label>
      <div class="col-sm-4 col-md-3 col-sm-offset-1 col-md-offset-0">
        <select id="InstructionDataForm_fieldSize"
                name="InstructionDataForm[fieldSize]" class="form-control">
          <option value="">Nicht bitcodiert</option>
          <option value="16">16-bit</option>
          <option value="32">32-bit</option>
        </select>

      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-3 col-sm-2 col-md-offset-2">
        <div class="">
          <label for="InstructionDataForm_optional"><input type="checkbox"
                                                           id="InstructionDataForm_optional"
                                                           name="InstructionDataForm[optional]"
                                                           value="1"
                                                           style="margin:0"/>
            Optional
          </label>

        </div>
      </div>
    </div>
    <div class="firmwares" data-prototype="
        &lt;div class=&quot;form-group&quot;&gt;
    &lt;select id=&quot;InstructionDataForm_firmwares___name___instruction&quot; name=&quot;InstructionDataForm[firmwares][__name__][instruction]&quot; readonly=&quot;readonly&quot; class=&quot;hidden&quot;&gt;            &lt;option value=&quot;1&quot; &gt;ZID:LABEL:PFX&lt;/option&gt;            &lt;option value=&quot;2&quot; &gt;ZID:LABEL:SFX&lt;/option&gt;            &lt;option value=&quot;3&quot; &gt;ZID:CODE:CFG:N&lt;/option&gt;            &lt;option value=&quot;4&quot; &gt;ZID:CODE:CFG:V&lt;/option&gt;            &lt;option value=&quot;5&quot; &gt;ZID:CODE:AN&lt;/option&gt;            &lt;option value=&quot;6&quot; &gt;ZID:CODE:AV&lt;/option&gt;            &lt;option value=&quot;7&quot; &gt;ZID:CODE:SN&lt;/option&gt;            &lt;option value=&quot;8&quot; &gt;ZID:CODE:DAT&lt;/option&gt;            &lt;option value=&quot;9&quot; &gt;ZID:TYP:CONV&lt;/option&gt;            &lt;option value=&quot;10&quot; &gt;ZID:TYP:OUT:NR&lt;/option&gt;            &lt;option value=&quot;11&quot; &gt;ZID:TYP:TOPO&lt;/option&gt;            &lt;option value=&quot;12&quot; &gt;ZID:TYP:USE&lt;/option&gt;            &lt;option value=&quot;13&quot; &gt;ZID:IN:V:MAX&lt;/option&gt;            &lt;option value=&quot;14&quot; &gt;ZID:IN:V:MIN&lt;/option&gt;            &lt;option value=&quot;15&quot; &gt;ZID:IN:V:NOM&lt;/option&gt;            &lt;option value=&quot;16&quot; &gt;ZID:LNK:V:MAX&lt;/option&gt;            &lt;option value=&quot;17&quot; &gt;ZID:LNK:V:MIN&lt;/option&gt;            &lt;option value=&quot;18&quot; &gt;ZID:LNK:V:NOM&lt;/option&gt;            &lt;option value=&quot;19&quot; &gt;ZID:OUT1:V:MAX&lt;/option&gt;            &lt;option value=&quot;20&quot; &gt;ZID:OUT1:V:MIN&lt;/option&gt;            &lt;option value=&quot;21&quot; &gt;ZID:OUT1:V:NOM&lt;/option&gt;            &lt;option value=&quot;22&quot; &gt;ZID:OUT1:C:MAX&lt;/option&gt;            &lt;option value=&quot;23&quot; &gt;ZID:OUT1:C:MIN&lt;/option&gt;            &lt;option value=&quot;24&quot; &gt;ZID:OUT1:C:NOM&lt;/option&gt;            &lt;option value=&quot;25&quot; &gt;ZID:OUT1:P:MAX&lt;/option&gt;            &lt;option value=&quot;26&quot; &gt;ZID:OUT1:P:MIN&lt;/option&gt;            &lt;option value=&quot;27&quot; &gt;ZID:OUT1:P:NOM&lt;/option&gt;            &lt;option value=&quot;28&quot; &gt;ZID:OUT1:C:PKX&lt;/option&gt;            &lt;option value=&quot;29&quot; &gt;ZID:OUT1:C:TPKX&lt;/option&gt;            &lt;option value=&quot;30&quot; &gt;ZID:OUT1:P:PKX&lt;/option&gt;            &lt;option value=&quot;31&quot; &gt;ZID:OUT1:P:TPKX&lt;/option&gt;            &lt;option value=&quot;32&quot; &gt;ZID:CMN:SAV&lt;/option&gt;            &lt;option value=&quot;33&quot; &gt;ZID:ACC&lt;/option&gt;            &lt;option value=&quot;34&quot; &gt;ZFW:ACC&lt;/option&gt;            &lt;option value=&quot;36&quot; &gt;ZFW:CMN:SAV&lt;/option&gt;            &lt;option value=&quot;37&quot; &gt;ZFW:LINT:C:MAX&lt;/option&gt;            &lt;option value=&quot;38&quot; &gt;ZFW:LINT:DUTY:O&lt;/option&gt;            &lt;option value=&quot;39&quot; &gt;ZFW:LINT:DUTY:DIS&lt;/option&gt;            &lt;option value=&quot;40&quot; &gt;ZFW:LINT:P:BL&lt;/option&gt;            &lt;option value=&quot;41&quot; &gt;ZFW:LINT:P:PEAK&lt;/option&gt;            &lt;option value=&quot;42&quot; &gt;ZFW:LINT:P:CONT&lt;/option&gt;            &lt;option value=&quot;43&quot; &gt;ZFW:SCA:DEV:VFAN&lt;/option&gt;            &lt;option value=&quot;44&quot; &gt;ZFW:SCA:IS:V&lt;/option&gt;            &lt;option value=&quot;45&quot; &gt;ZFW:SCA:IS:VLNK&lt;/option&gt;            &lt;option value=&quot;46&quot; &gt;ZFW:SCA:OS1:V&lt;/option&gt;            &lt;option value=&quot;47&quot; &gt;ZFW:SCA:OS1:VFLT&lt;/option&gt;            &lt;option value=&quot;48&quot; &gt;ZFW:SCA:OS1:C&lt;/option&gt;            &lt;option value=&quot;49&quot; &gt;ZFW:SCS:OS1:V&lt;/option&gt;            &lt;option value=&quot;50&quot; &gt;ZFW:SCS:OS1:C&lt;/option&gt;            &lt;option value=&quot;51&quot; &gt;ZFW:SCR:OS1:V&lt;/option&gt;            &lt;option value=&quot;52&quot; &gt;ZFW:SCR:OS1:C&lt;/option&gt;            &lt;option value=&quot;53&quot; &gt;ZFW:MD:VFAN:OVLO&lt;/option&gt;            &lt;option value=&quot;54&quot; &gt;ZFW:MD:VFAN:UVLO&lt;/option&gt;            &lt;option value=&quot;55&quot; &gt;ZFW:MD:VFAN:BOOST&lt;/option&gt;            &lt;option value=&quot;56&quot; &gt;ZFW:MI:VIN:UVLOIS&lt;/option&gt;            &lt;option value=&quot;57&quot; &gt;ZFW:MI:VIN:UVLOOS&lt;/option&gt;            &lt;option value=&quot;58&quot; &gt;ZFW:MI:VLNK:UVLO&lt;/option&gt;            &lt;option value=&quot;59&quot; &gt;ZFW:MI:VLNK:OVLO&lt;/option&gt;            &lt;option value=&quot;60&quot; &gt;ZFW:MI:VLNK:PFS&lt;/option&gt;            &lt;option value=&quot;61&quot; &gt;ZFW:MO1:V:OVLO&lt;/option&gt;            &lt;option value=&quot;62&quot; &gt;ZFW:MO1:V:SNS&lt;/option&gt;            &lt;option value=&quot;63&quot; &gt;ZFW:TPSFB:DB&lt;/option&gt;            &lt;option value=&quot;64&quot; &gt;ZFW:TSR:CTHS&lt;/option&gt;            &lt;option value=&quot;65&quot; &gt;ZFW:TPFC:LFF&lt;/option&gt;            &lt;option value=&quot;66&quot; &gt;ZFW:CLCC:USE&lt;/option&gt;            &lt;option value=&quot;67&quot; &gt;ZCTRL:ACC&lt;/option&gt;            &lt;option value=&quot;68&quot; &gt;ZCTRL:CMN:SAV&lt;/option&gt;            &lt;option value=&quot;69&quot; &gt;ZCTRL:OS1:DTY:MAX&lt;/option&gt;            &lt;option value=&quot;70&quot; &gt;ZCTRL:OS1:DTY:MIN&lt;/option&gt;            &lt;option value=&quot;71&quot; &gt;ZCTRL:OS1:DTY:INCR&lt;/option&gt;            &lt;option value=&quot;72&quot; &gt;ZCTRL:OS1:DTY:DECR&lt;/option&gt;            &lt;option value=&quot;73&quot; &gt;ZCTRL:OS1:DTY:DTHS&lt;/option&gt;            &lt;option value=&quot;74&quot; &gt;ZCTRL:OS1:V:P&lt;/option&gt;            &lt;option value=&quot;75&quot; &gt;ZCTRL:OS1:V:I&lt;/option&gt;            &lt;option value=&quot;76&quot; &gt;ZCTRL:OS1:V:D&lt;/option&gt;            &lt;option value=&quot;77&quot; &gt;ZCTRL:OS1:C:P&lt;/option&gt;            &lt;option value=&quot;78&quot; &gt;ZCTRL:OS1:C:I&lt;/option&gt;            &lt;option value=&quot;79&quot; &gt;ZCTRL:OS1:C:D&lt;/option&gt;            &lt;option value=&quot;80&quot; &gt;ZIF:ACC&lt;/option&gt;            &lt;option value=&quot;81&quot; &gt;ZIF:CMN:SAV&lt;/option&gt;            &lt;option value=&quot;82&quot; &gt;ZIF:BIO:IN:NR&lt;/option&gt;            &lt;option value=&quot;83&quot; &gt;ZIF:BIO:OUT:NR&lt;/option&gt;            &lt;option value=&quot;84&quot; &gt;ZIF:RS232:STD&lt;/option&gt;            &lt;option value=&quot;85&quot; &gt;ZIF:CAN:STD&lt;/option&gt;            &lt;option value=&quot;86&quot; &gt;ZIF:USB:STD&lt;/option&gt;            &lt;option value=&quot;87&quot; &gt;ZIF:LAN:MAC&lt;/option&gt;            &lt;option value=&quot;88&quot; &gt;ZIF:AIO:TYP&lt;/option&gt;            &lt;option value=&quot;89&quot; &gt;OS1:AIF:SCA:V&lt;/option&gt;            &lt;option value=&quot;90&quot; &gt;OS1:AIF:SCA:C&lt;/option&gt;            &lt;option value=&quot;91&quot; &gt;OS1:AIF:SCS:V&lt;/option&gt;            &lt;option value=&quot;92&quot; &gt;OS1:AIF:SCS:C&lt;/option&gt;            &lt;option value=&quot;93&quot; &gt;ZIF:CMN:ASS&lt;/option&gt;            &lt;option value=&quot;94&quot; &gt;ZIF:CMN:STDIF&lt;/option&gt;            &lt;option value=&quot;95&quot; &gt;ZHMI:CMN:ASS:INT&lt;/option&gt;            &lt;option value=&quot;96&quot; &gt;ZHMI:CMN:ASS:EXT&lt;/option&gt;            &lt;option value=&quot;97&quot; &gt;ZHMI:CMN:ASS:BRD&lt;/option&gt;            &lt;option value=&quot;98&quot; &gt;ZFW:OP:MODO:ASS&lt;/option&gt;            &lt;option value=&quot;99&quot; &gt;ZFW:OP:FAC:CFG&lt;/option&gt;            &lt;option value=&quot;100&quot; &gt;ZCTRL:OS1:ASS&lt;/option&gt;            &lt;option value=&quot;101&quot; &gt;ZHMI:ACC&lt;/option&gt;            &lt;option value=&quot;102&quot; &gt;ZHMI:CMN:SAV&lt;/option&gt;            &lt;option value=&quot;103&quot; &gt;ZFW:OP:MODC:ASS&lt;/option&gt;            &lt;option value=&quot;104&quot; &gt;ZFW:OP:MOD:STD&lt;/option&gt;            &lt;option value=&quot;106&quot; &gt;ZID:CMN:HNDL?&lt;/option&gt;            &lt;option value=&quot;107&quot; &gt;ZFW:CMN:HNDL?&lt;/option&gt;            &lt;option value=&quot;108&quot; &gt;ZCTRL:CMN:HNDL?&lt;/option&gt;            &lt;option value=&quot;109&quot; &gt;ZIF:CMN:HNDL?&lt;/option&gt;            &lt;option value=&quot;110&quot; &gt;ZHMI:CMN:HNDL?&lt;/option&gt;            &lt;option value=&quot;111&quot; &gt;ZCMN:MOD&lt;/option&gt;            &lt;option value=&quot;112&quot; &gt;ZCMN:MOD&lt;/option&gt;            &lt;option value=&quot;113&quot; &gt;ZCMN:MOD&lt;/option&gt;            &lt;option value=&quot;114&quot; &gt;ZCMN:MOD&lt;/option&gt;            &lt;option value=&quot;115&quot; &gt;ZCMN:MOD&lt;/option&gt;            &lt;option value=&quot;116&quot; &gt;ZFW:BANK:MAXNR&lt;/option&gt;            &lt;option value=&quot;117&quot; &gt;ZFW:SCA:OS1:CLEGC&lt;/option&gt;            &lt;option value=&quot;118&quot; &gt;ZFW:SCA:OS1:CLEGB&lt;/option&gt;            &lt;option value=&quot;119&quot; &gt;ZFW:SCA:OS1:CLEGA&lt;/option&gt;            &lt;option value=&quot;120&quot; &gt;ZID:TYP:FAST&lt;/option&gt;            &lt;option value=&quot;121&quot; &gt;ZCTRL:OS1:VREF:INCR&lt;/option&gt;            &lt;option value=&quot;122&quot; &gt;ZCTRL:OS1:CREF:INCR&lt;/option&gt;            &lt;option value=&quot;123&quot; &gt;ZFW:TPSFB:DBADA:DB23&lt;/option&gt;            &lt;option value=&quot;124&quot; &gt;ZFW:TPSFB:DBADA:DB01&lt;/option&gt;            &lt;option value=&quot;125&quot; &gt;ZFW:TPSFB:DBADA:C23&lt;/option&gt;            &lt;option value=&quot;126&quot; &gt;ZFW:TPSFB:DBADA:C01&lt;/option&gt;            &lt;option value=&quot;129&quot; &gt;TEST&lt;/option&gt;&lt;/select&gt;

            &lt;label class=&quot;col-sm-2 control-label required&quot; for=&quot;InstructionDataForm_firmwares___name___firmware&quot;&gt;Firmware&lt;/label&gt;
        &lt;div class=&quot;col-sm-3&quot;&gt;
            &lt;select id=&quot;InstructionDataForm_firmwares___name___firmware&quot; name=&quot;InstructionDataForm[firmwares][__name__][firmware]&quot; class=&quot;form-control&quot;&gt;            &lt;option value=&quot;1&quot; &gt;FW03.10&lt;/option&gt;            &lt;option value=&quot;2&quot; &gt;FW05.00&lt;/option&gt;            &lt;option value=&quot;3&quot; &gt;FW06.00&lt;/option&gt;            &lt;option value=&quot;9&quot; &gt;FW07.00&lt;/option&gt;&lt;/select&gt;

        &lt;/div&gt;
                    &lt;label class=&quot;col-sm-2 control-label required&quot; for=&quot;InstructionDataForm_firmwares___name___minVersion&quot;&gt;Mindestversion&lt;/label&gt;
        &lt;div class=&quot;col-sm-1&quot;&gt;
            &lt;input type=&quot;number&quot; id=&quot;InstructionDataForm_firmwares___name___minVersion&quot; name=&quot;InstructionDataForm[firmwares][__name__][minVersion]&quot; required=&quot;required&quot; min=&quot;0&quot; class=&quot;form-control&quot; /&gt;

        &lt;/div&gt;
                    &lt;label class=&quot;col-sm-2 control-label&quot; for=&quot;InstructionDataForm_firmwares___name___maxVersion&quot;&gt;H&ouml;chstversion&lt;/label&gt;
        &lt;div class=&quot;col-sm-1&quot;&gt;
            &lt;input type=&quot;number&quot; id=&quot;InstructionDataForm_firmwares___name___maxVersion&quot; name=&quot;InstructionDataForm[firmwares][__name__][maxVersion]&quot; min=&quot;0&quot; class=&quot;form-control&quot; /&gt;

        &lt;/div&gt;
        &lt;/div&gt;
    ">
    </div>
    <hr/>
    <div class="form-group">
      <div class="col-sm-2 col-md-1">
        <button type="submit" id="InstructionDataForm_Speichern"
                name="InstructionDataForm[Speichern]"
                class="btn btn-success">Speichern
        </button>
      </div>
      <div class="col-sm-2 col-md-1 col-md-offset-1 col-lg-offset-0">
        <a href="#" class="btn btn-danger">Abbrechen</a>
      </div>
      <input type="hidden" id="InstructionDataForm_minFirmware"
             name="InstructionDataForm[minFirmware]"
             value="0"/>
      <input type="hidden" id="InstructionDataForm_maxFirmware"
             name="InstructionDataForm[maxFirmware]"/>
    </div>
    <input type="hidden" id="InstructionDataForm_id"
           name="InstructionDataForm[id]"/>
    <div>
      <div id="InstructionDataForm_firmwares" data-prototype=""></div>
    </div>
    <input type="hidden" id="InstructionDataForm__token"
           name="InstructionDataForm[_token]"
           value="G6AAHcgMoLqhlLSqis6LdEZzQpddnZ7Z4sWHmSfbL8A"/></form>
</div>
<script
    src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script
    src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="sfForms.js"></script>
<script type="text/javascript">
  window.sfFormsOptions = {
    itemType: 'Firmware',
    itemFormClass: 'form-group',
    addItemElementClass: [
        'btn',
        'btn-primary'
    ],
    deleteItemElementClass: [
        'btn',
        'btn-danger'
    ]
  };
  //region Function definitions
  function initCollectionHolders() {
    // Get the div with the data-prototype for a firmware form
    $firmwaresHolder = $('div.firmwares');
  }

  function initDeleteFromCollectionButtons() {
    // add a delete button to all of the existing firmware form div elements
    $firmwaresHolder.find('.form-group').each(function() {
      // deleteFromCollectionFormButton($(this), "Diese Firmware entfernen");
    });
  }

  function initAddToCollectionButtons() {
    // append the link to add an email to the div
    $firmwaresHolder.append($addFirmwareLink);
  }

  function deleteFromCollectionFormButton($itemFormDiv, $title) {
    var $removeFormA = $('<a href="#"><i class="fa fa-remove red" style="margin-right:2em" title="' +
        $title +
        '"></i></a>');
    $itemFormDiv.find('label').first().prepend($removeFormA);

    $removeFormA.on('click', function(e) {
      // prevent the link from creating a "#" on the URL
      e.preventDefault();

      // remove the li for the tag form
      $itemFormDiv.remove();
    });
  }

  function addToCollectionForm(
      $collectionHolder, $addItemLink, $itemFormRootClass, $callback) {
    $itemFormRootClass = $itemFormRootClass || 'form-group';
    // Get the data-prototype
    var prototype = $collectionHolder.data('prototype');

    // get the new index
    var index = $collectionHolder.data('index');

    // Replace '__name__' in the prototype's HTML to
    // instead be a number based on how many items we have
    var newForm = prototype.replace(/__name__/g, index);

    // increase the index with one for the next item
    $collectionHolder.data('index', index + 1);

    // Display the form in the page before the link to add a email
    $addItemLink.before(newForm);

    deleteFromCollectionFormButton(
        $addItemLink.prev('.'.concat($itemFormRootClass).replace('..', '.')),
        $addItemLink.text().replace('hinzuf&uuml;gen', 'entfernen'));

    if (typeof $callback === 'function') {
      window.setTimeout($callback(newForm), 50);
    }
  }

  //endregion

  var $firmwaresHolder;

  //region Add-to-collection button definitions
  // setup link to add an firmware
  var $addFirmwareLink = $(
      '<button class="add_firmware_link col-sm-offset-1 btn btn-primary">Firmware hinzuf&uuml;gen</button>');
  //endregion

  $(document).ready(function() {
    //region Form result notifications
    //endregion

    initCollectionHolders();
    initDeleteFromCollectionButtons();
    initAddToCollectionButtons();

    // count the current form inputs we have and use that as the new
    // index when inserting a new item
    $firmwaresHolder.data('index', $firmwaresHolder.find('.form-group').length);

    $addFirmwareLink.on('click', function(e) {
      e.preventDefault();
      // add a new email form
      addToCollectionForm($firmwaresHolder, $addFirmwareLink, 'form-group');
    });
    $('button[type=submit]', $('#instruction_modify_form')).
        on('click', function(e) {
          $(':disabled', '#instruction_modify_form').each(function() {
            $(this).attr('disabled', false);
          });
        });
  });
</script>
</body>
</html>